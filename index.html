<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Diplomat’s Club</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700;800&display=swap" rel="stylesheet">

  <!-- Leaflet (mini-maps) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="" crossorigin="anonymous">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="" crossorigin="anonymous"></script>

  <style>
    :root{
      --bg:#f6f7f9; --card:#ffffff; --ink:#0f1720; --muted:#5b6472;
      --accent:#0058ff; --accent-2:#4c8dff; --good:#079455; --bad:#E11D48;
      --ring:#dfe5ee; --ring-2:#cfd7e3; --shadow:rgba(16,24,40,.08);
      --runway:#2bbef3; --runway-glow:#a8eaff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--ink);
      font-family:"Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      line-height:1.2; display:flex; flex-direction:column; align-items:center;
    }
    .frame{ width:min(100%,1000px); padding:18px 16px 40px }

    .title{
      font-weight:800; letter-spacing:.06em; text-align:center;
      font-size:clamp(22px, 4vw, 40px); margin:6px 0 16px;
    }

    /* Header strip */
    .players{
      display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:12px;
      background:var(--card); border:1px solid var(--ring); border-radius:16px; padding:12px 16px;
      box-shadow:0 8px 24px var(--shadow);
    }
    .p-side{ display:flex; align-items:center; gap:12px }
    .p-side.right{ justify-content:flex-end }
    .avatar{
      position:relative; width:56px; height:56px; border-radius:14px; background:#f0f3f8; border:1px solid var(--ring-2);
      display:grid; place-items:center; overflow:hidden;
    }
    .bubble{
      position:absolute; left:50%; top:-6px; transform:translate(-50%,-6px);
      background:#111827; color:#fff; font-size:12px; padding:6px 8px; border-radius:10px;
      opacity:0; pointer-events:none; transition:opacity .15s ease, transform .15s ease;
      white-space:nowrap;
    }
    .bubble:after{ content:""; position:absolute; left:10px; top:100%; border:8px solid transparent; border-top-color:#111827 }
    .bubble.show{ opacity:1; transform:translate(-50%,-12px) }

    .name{ font-weight:700; font-size:14px }
    .bank{
      display:inline-flex; gap:8px; align-items:center; font-weight:700; font-size:14px;
      background:#f2f5fb; border:1px solid var(--ring); border-radius:999px; padding:8px 12px;
    }
    .bank .you{ color:var(--good) } .bank .opp{ color:var(--bad) }

    /* Controls */
    .controls{
      margin-top:12px; background:var(--card); border:1px solid var(--ring); border-radius:16px; padding:12px 16px;
      box-shadow:0 8px 24px var(--shadow); display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
    }
    .ctl{ display:flex; align-items:center; gap:8px; color:var(--muted); font-weight:600 }
    .ctl input[type="text"], .ctl input[type="number"]{
      width:86px; padding:10px 12px; border-radius:10px; border:1px solid var(--ring-2); background:#fff; color:var(--ink); font-weight:700; text-align:center;
    }
    .btn{
      border:1px solid var(--ring-2); background:#eef4ff; color:#1b3b8f; font-weight:800;
      padding:10px 14px; border-radius:12px; cursor:pointer;
    }
    .btn.primary{ background:var(--accent); color:#fff; border-color:var(--accent) }
    .btn:disabled{ opacity:.55; cursor:not-allowed }

    /* Round */
    .arena{ margin-top:14px; display:grid; grid-template-columns:1fr 1fr; gap:16px }
    .card{
      background:var(--card); border:1px solid var(--ring); border-radius:16px; padding:14px; box-shadow:0 8px 24px var(--shadow);
    }
    .line{ font-weight:800; letter-spacing:.05em; margin-bottom:6px }
    .eta{ color:var(--muted); font-weight:700; font-size:13px }

    .progress{ margin-top:10px; height:14px; background:#eef2f8; border:1px solid var(--ring); border-radius:999px; overflow:hidden; position:relative }
    .bar{ height:100%; width:0%; background:linear-gradient(90deg,var(--runway),var(--runway-glow)); box-shadow:0 0 10px var(--runway-glow) inset, 0 0 6px var(--runway-glow) }

    .map{ margin-top:10px; height:180px; border-radius:12px; overflow:hidden; border:1px solid var(--ring-2) }

    .log{ grid-column:1 / -1; text-align:center; color:#111827; font-weight:800; background:var(--card); border:1px solid var(--ring); border-radius:14px; padding:12px; box-shadow:0 8px 24px var(--shadow) }

    /* Head flip (Terence & Philip style) */
    .flip{ transform-origin:50% 52%; }
    .talk .flip{ animation:flap .45s ease-in-out infinite }
    @keyframes flap { 0%,100%{ transform:rotate(0) } 50%{ transform:rotate(-14deg) } }

    /* Reactions */
    .lean{ animation: lean .6s ease-in-out infinite alternate }
    @keyframes lean { from{ transform:translateY(-1px) rotate(-1deg) } to{ transform:translateY(-3px) rotate(1deg) } }
    .pump{ animation: pump .55s ease-in-out 6 }
    @keyframes pump { 0%{ transform:translateY(0) } 50%{ transform:translateY(-10px) } 100%{ transform:translateY(0) } }
    .slump{ animation: slump .7s ease-in-out 3 }
    @keyframes slump { 0%{ transform:rotate(0) } 50%{ transform:rotate(-6deg) translateY(2px) } 100%{ transform:rotate(0) } }

    @media (max-width:820px){
      .arena{ grid-template-columns:1fr }
    }
  </style>
</head>
<body>
  <div class="frame">
    <div class="title">Diplomat’s Club</div>

    <!-- Players header -->
    <div class="players" id="sofa">
      <div class="p-side">
        <div class="avatar" id="charK">
          <!-- KESSLER SVG (more detailed hair, jacket; head-top in .flip group) -->
          <svg viewBox="0 0 80 80" width="48" height="48" aria-hidden="true">
            <rect x="0" y="0" width="80" height="80" rx="14" fill="#e9edf5"/>
            <g id="kessler">
              <g class="flip">
                <path d="M44 12c-9 2-14 7-15 14l10 4c2-5 8-7 12-7 2-4-2-9-7-11z" fill="#2a2a32"/>
              </g>
              <circle cx="38" cy="36" r="13" fill="#f4c7a0"/>
              <rect x="20" y="50" width="36" height="18" rx="6" fill="#a7742a"/>
              <rect x="36" y="50" width="6" height="18" fill="#20304c"/>
              <rect x="31" y="33" width="4" height="3" rx="1" fill="#1c2436"/>
              <rect x="44" y="33" width="4" height="3" rx="1" fill="#1c2436"/>
              <rect x="40" y="38" width="6" height="3" rx="1.5" fill="#1c2436"/>
            </g>
          </svg>
          <div class="bubble" id="bubbleK"></div>
        </div>
        <div class="name">KESSLER</div>
      </div>

      <div class="bank">KESSLER: <span id="youCash" class="you">500 sirignanos</span></div>

      <div class="p-side right">
        <div class="name">THE CAJUN</div>
        <div class="avatar" id="charT">
          <!-- CAJUN SVG (big foam hat; head-top in .flip group) -->
          <svg viewBox="0 0 80 80" width="48" height="48" aria-hidden="true">
            <rect x="0" y="0" width="80" height="80" rx="14" fill="#e9edf5"/>
            <g id="cajun">
              <g class="flip">
                <path d="M40 10c-10 0-16 9-16 18h32C56 19 50 10 40 10z" fill="#ead6ab"/>
                <rect x="14" y="26" width="52" height="8" rx="4" fill="#dec89b"/>
              </g>
              <circle cx="40" cy="38" r="12" fill="#f4c7a0"/>
              <rect x="24" y="50" width="32" height="18" rx="6" fill="#355a9a"/>
              <rect x="38" y="50" width="4" height="18" fill="#20304c"/>
              <rect x="34" y="35" width="4" height="3" rx="1" fill="#1c2436"/>
              <rect x="46" y="35" width="4" height="3" rx="1" fill="#1c2436"/>
              <rect x="42" y="40" width="6" height="3" rx="1.5" fill="#1c2436"/>
            </g>
          </svg>
          <div class="bubble" id="bubbleT"></div>
        </div>
      </div>
    </div>

    <!-- Controls -->
    <div class="controls">
      <div class="ctl">
        <label><input id="liveToggle" type="checkbox"> LIVE airport</label>
        <input id="airport" type="text" maxlength="4" value="JFK" />
      </div>
      <div class="ctl">
        <span>Bet</span><input id="betIn" type="number" value="50" step="25" min="25" />
      </div>
      <div class="ctl" style="gap:8px">
        <button id="deal" class="btn primary">Deal flights</button>
        <button id="reset" class="btn">Reset</button>
      </div>
      <div class="bank">THE CAJUN: <span id="oppCash" class="opp">2,000 sirignanos</span></div>
    </div>

    <!-- Round -->
    <div class="arena">
      <div class="card" id="A">
        <div class="line" id="lineA">A — waiting…</div>
        <div class="eta" id="etaA"></div>
        <div class="progress"><div class="bar" id="barA"></div></div>
        <div class="map" id="mapA"></div>
      </div>

      <div class="card" id="B">
        <div class="line" id="lineB">B — waiting…</div>
        <div class="eta" id="etaB"></div>
        <div class="progress"><div class="bar" id="barB"></div></div>
        <div class="map" id="mapB"></div>
      </div>

      <div class="log" id="log">Welcome to the Diplomat’s Club. Deal flights to start.</div>
    </div>
  </div>

  <script src="./game.js"></script>
</body>
</html>
