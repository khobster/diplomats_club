<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Diplomat’s Club</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Inline favicon so GitHub Pages doesn’t 404 -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ccircle cx='16' cy='16' r='16' fill='%230058ff'/%3E%3Ctext x='16' y='21' text-anchor='middle' font-family='Arial' font-size='16' fill='white'%3EDC%3C/text%3E%3C/svg%3E">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700;800&display=swap" rel="stylesheet">

  <!-- Leaflet (mini-maps) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="anonymous">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin="anonymous"></script>

  <style>
    :root{
      --bg:#f6f7f9; --card:#ffffff; --ink:#0f1720; --muted:#5b6472;
      --accent:#0058ff; --accent-2:#4c8dff; --good:#079455; --bad:#E11D48;
      --ring:#dfe5ee; --ring-2:#cfd7e3; --shadow:rgba(16,24,40,.08);
      --runway:#2bbef3; --runway-glow:#a8eaff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--ink);
      font-family:"Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      line-height:1.2; display:flex; flex-direction:column; align-items:center;
    }
    .frame{ width:min(100%,1000px); padding:18px 16px 40px }

    .title{
      font-weight:800; letter-spacing:.06em; text-align:center;
      font-size:clamp(22px, 4vw, 40px); margin:6px 0 16px;
    }

    /* Header strip */
    .players{
      display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:12px;
      background:var(--card); border:1px solid var(--ring); border-radius:16px; padding:12px 16px;
      box-shadow:0 8px 24px var(--shadow);
    }
    .p-side{ display:flex; align-items:center; gap:12px }
    .p-side.right{ justify-content:flex-end }
    .avatar{
      position:relative; width:64px; height:64px; border-radius:14px; background:#f0f3f8; border:1px solid var(--ring-2);
      display:grid; place-items:center; overflow:hidden;
    }
    .bubble{
      position:absolute; left:50%; top:-6px; transform:translate(-50%,-6px);
      background:#111827; color:#fff; font-size:12px; padding:6px 8px; border-radius:10px;
      opacity:0; pointer-events:none; transition:opacity .15s ease, transform .15s ease;
      white-space:nowrap;
    }
    .bubble:after{ content:""; position:absolute; left:10px; top:100%; border:8px solid transparent; border-top-color:#111827 }
    .bubble.show{ opacity:1; transform:translate(-50%,-12px) }

    .name{ font-weight:700; font-size:14px }
    .bank{
      display:inline-flex; gap:8px; align-items:center; font-weight:700; font-size:14px;
      background:#f2f5fb; border:1px solid var(--ring); border-radius:999px; padding:8px 12px;
    }
    .bank .you{ color:var(--good) } .bank .opp{ color:var(--bad) }

    /* Controls */
    .controls{
      margin-top:12px; background:var(--card); border:1px solid var(--ring); border-radius:16px; padding:12px 16px;
      box-shadow:0 8px 24px var(--shadow); display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
    }
    .ctl{ display:flex; align-items:center; gap:8px; color:var(--muted); font-weight:600 }
    .ctl input[type="text"], .ctl input[type="number"]{
      width:86px; padding:10px 12px; border-radius:10px; border:1px solid var(--ring-2); background:#fff; color:var(--ink); font-weight:700; text-align:center;
    }
    .btn{
      border:1px solid var(--ring-2); background:#eef4ff; color:#1b3b8f; font-weight:800;
      padding:10px 14px; border-radius:12px; cursor:pointer;
    }
    .btn.primary{ background:var(--accent); color:#fff; border-color:var(--accent) }
    .btn:disabled{ opacity:.55; cursor:not-allowed }

    /* Round */
    .arena{ margin-top:14px; display:grid; grid-template-columns:1fr 1fr; gap:16px }
    .card{
      background:var(--card); border:1px solid var(--ring); border-radius:16px; padding:14px; box-shadow:0 8px 24px var(--shadow);
    }
    .line{ font-weight:800; letter-spacing:.05em; margin-bottom:6px }
    .eta{ color:var(--muted); font-weight:700; font-size:13px }

    .progress{ margin-top:10px; height:14px; background:#eef2f8; border:1px solid var(--ring); border-radius:999px; overflow:hidden; position:relative }
    .bar{ height:100%; width:0%; background:linear-gradient(90deg,var(--runway),var(--runway-glow)); box-shadow:0 0 10px var(--runway-glow) inset, 0 0 6px var(--runway-glow) }

    .map{ margin-top:10px; height:180px; border-radius:12px; overflow:hidden; border:1px solid var(--ring-2) }

    .log{ grid-column:1 / -1; text-align:center; color:#111827; font-weight:800; background:var(--card); border:1px solid var(--ring); border-radius:14px; padding:12px; box-shadow:0 8px 24px var(--shadow) }

    /* ——— Terence & Phillip-style talking heads ——— */
    .headTop{ transform-origin:50% 58%; }
    .talk .headTop{ animation:pop .32s ease-in-out infinite }
    @keyframes pop{ 0%,100%{ transform:translateY(0) rotate(0) } 50%{ transform:translateY(-7px) rotate(-2deg) } }
    .headBot{ transform-origin:50% 60%; }
    .talk .headBot{ animation:popbot .32s ease-in-out infinite }
    @keyframes popbot{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(2px) } }

    /* Reactions */
    .lean{ animation: lean .6s ease-in-out infinite alternate }
    @keyframes lean { from{ transform:translateY(-1px) rotate(-1deg) } to{ transform:translateY(-3px) rotate(1deg) } }
    .pump{ animation: pump .55s ease-in-out 6 }
    @keyframes pump { 0%{ transform:translateY(0) } 50%{ transform:translateY(-10px) } 100%{ transform:translateY(0) } }
    .slump{ animation: slump .7s ease-in-out 3 }
    @keyframes slump { 0%{ transform:rotate(0) } 50%{ transform:rotate(-6deg) translateY(2px) } 100%{ transform:rotate(0) } }

    @media (max-width:820px){
      .arena{ grid-template-columns:1fr }
    }
  </style>
</head>
<body>
  <div class="frame">
    <div class="title">Diplomat’s Club</div>

    <!-- Players header -->
    <div class="players" id="sofa">
      <div class="p-side">
        <div class="avatar" id="charK">
          <!-- KESSLER: caricature with quiff, brows, blazer; head split into top+bottom groups -->
          <svg viewBox="0 0 96 96" width="56" height="56" aria-hidden="true">
            <rect x="0" y="0" width="96" height="96" rx="16" fill="#eef2f8"/>
            <g transform="translate(48,50)">
              <!-- top half -->
              <g class="headTop">
                <path d="M-6 -30 C-2 -40 16 -42 22 -38 C18 -30 14 -24 14 -16 L-10 -18 Z" fill="#2b2b33"/>
                <ellipse cx="0" cy="-6" rx="22" ry="18" fill="#f4c7a0"/>
                <rect x="-8" y="-12" width="6" height="4" rx="2" fill="#1b2233"/>
                <rect x="6" y="-12" width="6" height="4" rx="2" fill="#1b2233"/>
                <rect x="-1" y="-3" width="10" height="3" rx="1.5" fill="#1b2233"/>
                <path d="M-10 -20 q8 -6 16 0" stroke="#1b2233" stroke-width="3" fill="none"/>
              </g>
              <!-- bottom half -->
              <g class="headBot">
                <ellipse cx="0" cy="6" rx="23" ry="17" fill="#f4c7a0"/>
                <rect x="-18" y="16" width="36" height="18" rx="6" fill="#a7742a"/>
                <rect x="-2" y="16" width="4" height="18" fill="#20304c"/>
              </g>
            </g>
          </svg>
          <div class="bubble" id="bubbleK"></div>
        </div>
        <div class="name">KESSLER</div>
      </div>

      <div class="bank">KESSLER: <span id="youCash" class="you">500 sirignanos</span></div>

      <div class="p-side right">
        <div class="name">THE CAJUN</div>
        <div class="avatar" id="charT">
          <!-- CAJUN: oversized foam hat & suit; head split for pop-talk -->
          <svg viewBox="0 0 96 96" width="56" height="56" aria-hidden="true">
            <rect x="0" y="0" width="96" height="96" rx="16" fill="#eef2f8"/>
            <g transform="translate(48,50)">
              <!-- top half (hat + crown) -->
              <g class="headTop">
                <path d="M0 -38 c-16 0 -26 14 -26 28 h52 c0-14 -10-28 -26-28 z" fill="#ead6ab"/>
                <rect x="-30" y="-10" width="60" height="8" rx="4" fill="#dec89b"/>
                <ellipse cx="0" cy="-4" rx="20" ry="16" fill="#f4c7a0"/>
                <circle cx="-6" cy="-6" r="3" fill="#1b2233"/>
                <circle cx="6" cy="-6" r="3" fill="#1b2233"/>
              </g>
              <!-- bottom half (jaw + suit) -->
              <g class="headBot">
                <ellipse cx="0" cy="7" rx="22" ry="15" fill="#f4c7a0"/>
                <rect x="-18" y="16" width="36" height="18" rx="6" fill="#355a9a"/>
                <rect x="-2" y="16" width="4" height="18" fill="#20304c"/>
                <rect x="-1" y="2" width="10" height="3" rx="1.5" fill="#1b2233"/>
              </g>
            </g>
          </svg>
          <div class="bubble" id="bubbleT"></div>
        </div>
      </div>
    </div>

    <!-- Controls -->
    <div class="controls">
      <div class="ctl">
        <label><input id="liveToggle" type="checkbox"> LIVE airport</label>
        <input id="airport" type="text" maxlength="4" value="JFK" />
      </div>
      <div class="ctl">
        <span>Bet</span><input id="betIn" type="number" value="50" step="25" min="25" />
      </div>
      <div class="ctl" style="gap:8px">
        <button id="deal" class="btn primary">Deal flights</button>
        <button id="reset" class="btn">Reset</button>
      </div>
      <div class="bank">THE CAJUN: <span id="oppCash" class="opp">2,000 sirignanos</span></div>
    </div>

    <!-- Round -->
    <div class="arena">
      <div class="card" id="A">
        <div class="line" id="lineA">A — waiting…</div>
        <div class="eta" id="etaA"></div>
        <div class="progress"><div class="bar" id="barA"></div></div>
        <div class="map" id="mapA"></div>
      </div>

      <div class="card" id="B">
        <div class="line" id="lineB">B — waiting…</div>
        <div class="eta" id="etaB"></div>
        <div class="progress"><div class="bar" id="barB"></div></div>
        <div class="map" id="mapB"></div>
      </div>

      <div class="log" id="log">Welcome to the Diplomat’s Club. Deal flights to start.</div>
    </div>
  </div>

  <script src="./game.js"></script>
</body>
</html>
